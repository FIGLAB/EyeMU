<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">



    <title>GAZEL</title>

<!-- For drawing the predicted output directly onto the HTML page with an icon-->
<!-- CSS comments are not //, and if you put them in the <style> header they break it -->
    <style>
    .placeholderdot{
        width: 30px;
        height: 30px;
        background-color: #ffab56;
        border-radius: 50%;
        position:fixed;
    }

    .targetdot{
        width: 60px;
        height: 60px;
        background-color: #0e5cab;
        border-radius: 50%;
        position:fixed;
    }

    .predicdot{
        width: 30px;
        height: 30px;
        background-color: #ffab56;
        border-radius: 50%;
        position:fixed;
    }

    .predicdot2{
        width: 30px;
        height: 30px;
        background-color: #e84338bb;
        border-radius: 50%;
        position:fixed;
    }

    .onscreenregion{
        position:fixed;
        background-color:#00003010;
        left: 0px;
        top: 0px;
        right:100px;
        bottom:100px;
    }


    .widebutton {
        display: block;
        width: 100%;
        border: none;
        background-color: #CCC;
        padding: 14px 28px;
        font-size: 16px;
        cursor: pointer;
        text-align: center;
    }

    hr {
        background-color:#ccc;
        height:1px;
        border:none;
    }
    </style>

    <style>
        table,td {
            border: 1px solid black;
        }
    </style>

    
<!--Other ML library-->

<!--<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>-->
<script src="/static/ML.js"></script>
<script src="/static/mainTesting.js"></script>

<script>
    var imported_data = new Object();
    function openResultsFiles(event) {
        var input = event.target;
        expose2 = input;

        // Read each file into an object of results
        for (let i = 0; i< input.files.length; i++){
            input.files[i].text().then(fileContents => {
                parsedData = JSON.parse(fileContents);

                fileName = input.files[i].name;
                fileName = fileName.replace(".json", "").replace(" ", "");

                imported_data[fileName] = parsedData;
                console.log(fileName, " parsed");
            });
        };

        // Show results
        setTimeout(displayResults, 1000);
    }

    // Trials have the format [Date.now(), [initial_width, initial_height], errorsX, errorsY, locations_acc]
    function displayResults(){
        // Create a section for each key
        Object.keys(imported_data).forEach((key) => {
            let user_data = imported_data[key];
            user_data.forEach((trialData) => {

                let screenw = user_data[1][0];
                let screenh = user_data[1][1];

                let elem = document.createElement("div");

                // Add name (remove this in final)
                elem.innerHTML += "<h3>" + key + "</h3>";

                console.log(user_data);

                // Show average X and Y error from each trial
                elem.innerHTML += "X errors: ";
                user_data[2].forEach((elem) => {
                    elem.innerHTML += (elem/screenw).toFixed(2) + ", ";
                });
                elem.innerHTML += "<br>";
                elem.innerHTML += "Y errors: ";
                user_data[3].forEach((elem) => {
                    elem.innerHTML += (elem/screenh).toFixed(2) + ", ";
                });
            });
            elem.innerHTML += "<br>";






            //
        });
    }

</script>


</head>
<body style="background-color:aliceblue; font-family: Verdana, sans-serif;">


<input type="file" accept="application/json" id="eyeData" multiple onchange='openResultsFiles(event)'></input>

<div id="main">

</div>



</body>
</html>